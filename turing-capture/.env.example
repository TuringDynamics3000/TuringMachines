# TuringCaptureâ„¢ Configuration
# Copy this file to .env and configure for your environment

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection URL
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://postgres@localhost:5432/turingcapture

# Database mode: async (recommended) or sync
DB_MODE=async

# ============================================================================
# STORAGE CONFIGURATION
# ============================================================================

# Storage mode for biometric images: memory | local | s3
# - memory: In-memory storage (default, good for demos)
# - local: Local filesystem storage (good for development)
# - s3: AWS S3 storage (production)
BIOMETRIC_STORAGE_MODE=memory

# S3 configuration (only used if STORAGE_MODE=s3)
BIOMETRIC_S3_BUCKET=turingmachines-biometrics
BIOMETRIC_S3_PREFIX=sessions/{session_id}/{artifact}.jpg

# AWS credentials (if using S3)
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_DEFAULT_REGION=us-east-1

# ============================================================================
# MODEL CONFIGURATION
# ============================================================================

# ONNX model paths (local files)
# Models will be loaded from these paths if they exist
# Otherwise, mock embeddings will be used
MOBILEFACENET_PATH=./models/mobilefacenet.onnx
ARCFACE_PATH=./models/arcface.onnx

# S3 model fallback (optional)
# If local models don't exist, try downloading from S3
# ARCFACE_S3_BUCKET=turingmachines-models
# ARCFACE_S3_KEY=models/arcface_v1.onnx

# ============================================================================
# BIOMETRIC THRESHOLDS
# ============================================================================

# Face matching thresholds (0.0 - 1.0)
MOBILEFACENET_THRESHOLD=0.60
ARCFACE_THRESHOLD=0.45

# Liveness detection threshold (0.0 - 1.0)
LIVENESS_THRESHOLD=0.75

# ============================================================================
# SERVICE CONFIGURATION
# ============================================================================

# Service port
PORT=8101

# Log level: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# CORS origins (comma-separated)
CORS_ORIGINS=*

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable database persistence (always recommended)
DB_PERSIST=true

# Use mock embeddings (for testing without ONNX models)
# AUTO: Use mock if models not found
# TRUE: Always use mock
# FALSE: Require real models
USE_MOCK_EMBEDDINGS=auto

# ============================================================================
# MONITORING & TELEMETRY
# ============================================================================

# Enable Prometheus metrics
ENABLE_METRICS=true

# Sentry DSN (for error tracking)
# SENTRY_DSN=https://...

# ============================================================================
# TENANT CONFIGURATION
# ============================================================================

# Default tenant ID
DEFAULT_TENANT_ID=default

# Tenant-specific model routing (JSON)
# Example: {"geniusto": "arcface", "equix": "mobilefacenet"}
# TENANT_MODEL_ROUTING={}
